(()=>{var Q=(c,l)=>()=>(l||c((l={exports:{}}).exports,l),l.exports);var G=Q((q,v)=>{function N(c,l,s=!0,I=!1,h=!1){let k,O,j="",L=0,C={},f=[],S="",T=0,d="";try{k=JSON.parse(c.replace(/(:\s*\[?\s*-?\d*)\.0/g,"$1.1")),O=k}catch(e){return{go:"",error:e.message}}return l=E(l||"AutoGenerated"),a(`type ${l} `),A(O),{go:s?j+=S:j};function A(e,t=0){if(typeof e=="object"&&e!==null)if(Array.isArray(e)){let n,o=e.length;for(let i=0;i<o;i++){let u=P(e[i]);if(!n)n=u;else if(n!=u&&(n=V(u,n),n=="any"))break}let r=s&&["struct","slice"].includes(n)?`[]${d}`:"[]";if(s&&t>=2?p(r):a(r),n=="struct"){let i={};for(let y=0;y<o;y++){let x=Object.keys(e[y]);for(let U in x){let b=x[U];if(!(b in i))i[b]={value:e[y][b],count:0};else{let R=i[b].value,_=e[y][b];J(R,_)&&(F(Object.keys(_),Object.keys(R))||(b=`${b}_${Z()}`,i[b]={value:_,count:0}))}i[b].count++}}let u=Object.keys(i),g={},m={};for(let y in u){let x=u[y],U=i[x];g[x]=U.value,m[x]=U.count!=o}M(t+1,T,g,m)}else n=="slice"?A(e[0],t):s&&t>=2?p(n||"any"):a(n||"any")}else s&&(t>=2?p(d):a(d)),M(t+1,T,e);else s&&t>=2?p(P(e)):a(P(e))}function M(e,t,n,o){s&&f.push(e>=2?`
`:"");let r=[];if(s&&e>=2){let i=`type ${d}`,u=X(Object.keys(n));if(d in C&&F(u,C[d])){f.pop();return}C[d]=u,p(`${i} struct {
`),++t;let g=Object.keys(n);for(let m in g){let y=H(g[m]);$(t);let x=w(E(y),r);r.push(x),p(x+" "),d=x,A(n[g[m]],e),p(' `json:"'+y),(h||o&&o[g[m]]===!0)&&p(",omitempty"),p('"`\n')}$(--t),p("}")}else{a(`struct {
`),++L;let i=Object.keys(n);for(let u in i){let g=H(i[u]);D(L);let m=w(E(g),r);r.push(m),a(m+" "),d=m,A(n[i[u]],e),a(' `json:"'+g),(h||o&&o[i[u]]===!0)&&a(",omitempty"),I&&n[i[u]]!==""&&typeof n[i[u]]!="object"&&a('" example:"'+n[i[u]]),a('"`\n')}D(--L),a("}")}s&&(S+=f.pop())}function D(e){for(let t=0;t<e;t++)j+="	"}function a(e){j+=e}function $(e){for(let t=0;t<e;t++)f[f.length-1]+="	"}function p(e){f[f.length-1]+=e}function w(e,t){if(t.indexOf(e)===-1)return e;let n=0;for(;;){let o=e+n.toString();if(t.indexOf(o)===-1)return o;n++}}function E(e){e=B(e);let t=z(e).replace(/[^a-z0-9]/ig,"");return t?B(t):"NAMING_FAILED"}function B(e){if(e)e.match(/^\d+$/)?e="Num"+e:e.charAt(0).match(/\d/)&&(e={0:"Zero_",1:"One_",2:"Two_",3:"Three_",4:"Four_",5:"Five_",6:"Six_",7:"Seven_",8:"Eight_",9:"Nine_"}[e.charAt(0)]+e.substr(1));else return"";return e}function P(e){if(e===null)return"any";switch(typeof e){case"string":return/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(\+\d\d:\d\d|Z)/.test(e)?"time.Time":"string";case"number":return e%1===0?e>-2147483648&&e<2147483647?"int":"int64":"float64";case"boolean":return"bool";case"object":return Array.isArray(e)?"slice":"struct";default:return"any"}}function V(e,t){return e.substr(0,5)=="float"&&t.substr(0,3)=="int"?e:e.substr(0,3)=="int"&&t.substr(0,5)=="float"?t:"any"}function z(e){e.match(/^[_A-Z0-9]+$/)&&(e=e.toLowerCase());let t=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return e.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(n,o,r){return t.indexOf(r.toUpperCase())>=0?o+r.toUpperCase():o+r[0].toUpperCase()+r.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(n,o,r){return t.indexOf(o+r.toUpperCase())>=0?(o+r).toUpperCase():o+r})}function Z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function H(e){let t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(e.length>=36){let o=e.substr(-36);if(t.test(o))return e.slice(0,-1*(36+1))}return e}function J(e,t){let n="[object Object]";return Object.prototype.toString.call(e)===n&&Object.prototype.toString.call(t)===n}function F(e,t){let n=e.length,o=t.length;if(n==0&&o==0)return!0;if(n!=o)return!1;for(let r of e)if(!t.includes(r))return!1;return!0}function X(e){for(let t in e)e[t]=E(e[t]);return e}}typeof v<"u"&&(v.parent||v.children?process.argv.length>2&&process.argv[2]==="-big"?(bufs=[],process.stdin.on("data",function(c){bufs.push(c)}),process.stdin.on("end",function(){let c=Buffer.concat(bufs).toString("utf8");console.log(N(c).go)})):process.stdin.on("data",function(c){let l=c.toString("utf8");console.log(N(l).go)}):v.exports=N)});var K=G();(function(){let c=document.getElementById("inputContainer"),l=document.getElementById("outputContainer"),s=document.getElementById("inputJson"),I=document.getElementById("outputStruct"),h=document.defaultView.getComputedStyle(l).display,k=!1,O=!1,j=!0,L="",C="";document.getElementById("inlineType").addEventListener("change",function(){k=this.checked,f(s.value)}),document.getElementById("omitEmpty").addEventListener("change",function(){O=this.checked,f(s.value)}),document.getElementById("containerFull").addEventListener("click",()=>{document.defaultView.getComputedStyle(c).display!=="none"?c.classList.add("hidden"):(c.classList.remove("hidden"),h==="none"&&l.classList.add("hidden"))});let f=function(S){if(C=S,!S){s.classList.remove("!border-red-500"),h!=="none"&&(I.innerHTML="");return}let T=K(S,"",!k,!1,O);if(T.error)s.classList.add("!border-red-500"),h!=="none"&&(I.innerHTML='<p class="text-red-500 font-bold p-3">'+T.error+"</p>");else{L=T.go;let d=Prism.highlight(T.go,Prism.languages.go,"go");I.innerHTML='<pre class="language-go !px-3 !py-2 !m-0 h-full !rounded-none scrollable"><code class="prism language-go" >'+d+"</code></pre>",h==="none"&&c.classList.add("hidden"),l.classList.remove("hidden"),s.classList.remove("!border-red-500")}};s.addEventListener("keyup",function(){C!=this.value&&j&&f(this.value)}),document.getElementById("copy").addEventListener("click",function(){L&&navigator.clipboard.writeText(L).then(()=>{defaultToast("\u5DF2\u590D\u5236")})})})();})();

(()=>{var Q=(a,c)=>()=>(c||a((c={exports:{}}).exports,c),c.exports);var G=Q((q,E)=>{function P(a,c,o=!0,I=!1,S=!1){let T,y,v="",k=0,L={},x=[],_="",N=0,b="";try{T=JSON.parse(a.replace(/(:\s*\[?\s*-?\d*)\.0/g,"$1.1")),y=T}catch(e){return{go:"",error:e.message}}return c=O(c||"AutoGenerated"),l(`type ${c} `),j(y),{go:o?v+=_:v};function j(e,t=0){if(typeof e=="object"&&e!==null)if(Array.isArray(e)){let n,r=e.length;for(let i=0;i<r;i++){let u=A(e[i]);if(!n)n=u;else if(n!=u&&(n=z(u,n),n=="any"))break}let s=o&&["struct","slice"].includes(n)?`[]${b}`:"[]";if(o&&t>=2?f(s):l(s),n=="struct"){let i={};for(let m=0;m<r;m++){let p=Object.keys(e[m]);for(let C in p){let h=p[C];if(!(h in i))i[h]={value:e[m][h],count:0};else{let H=i[h].value,U=e[m][h];X(H,U)&&(F(Object.keys(U),Object.keys(H))||(h=`${h}_${J()}`,i[h]={value:U,count:0}))}i[h].count++}}let u=Object.keys(i),d={},g={};for(let m in u){let p=u[m],C=i[p];d[p]=C.value,g[p]=C.count!=r}B(t+1,N,d,g)}else n=="slice"?j(e[0],t):o&&t>=2?f(n||"any"):l(n||"any")}else o&&(t>=2?f(b):l(b)),B(t+1,N,e);else o&&t>=2?f(A(e)):l(A(e))}function B(e,t,n,r){o&&x.push(e>=2?`
`:"");let s=[];if(o&&e>=2){let i=`type ${b}`,u=V(Object.keys(n));if(b in L&&F(u,L[b])){x.pop();return}L[b]=u,f(`${i} struct {
`),++t;let d=Object.keys(n);for(let g in d){let m=w(d[g]);M(t);let p=D(O(m),s);s.push(p),f(p+" "),b=p,j(n[d[g]],e),f(' `json:"'+m),(S||r&&r[d[g]]===!0)&&f(",omitempty"),f('"`\n')}M(--t),f("}")}else{l(`struct {
`),++k;let i=Object.keys(n);for(let u in i){let d=w(i[u]);$(k);let g=D(O(d),s);s.push(g),l(g+" "),b=g,j(n[i[u]],e),l(' `json:"'+d),(S||r&&r[i[u]]===!0)&&l(",omitempty"),I&&n[i[u]]!==""&&typeof n[i[u]]!="object"&&l('" example:"'+n[i[u]]),l('"`\n')}$(--k),l("}")}o&&(_+=x.pop())}function $(e){for(let t=0;t<e;t++)v+="	"}function l(e){v+=e}function M(e){for(let t=0;t<e;t++)x[x.length-1]+="	"}function f(e){x[x.length-1]+=e}function D(e,t){if(t.indexOf(e)===-1)return e;let n=0;for(;;){let r=e+n.toString();if(t.indexOf(r)===-1)return r;n++}}function O(e){e=R(e);let t=Z(e).replace(/[^a-z0-9]/ig,"");return t?R(t):"NAMING_FAILED"}function R(e){if(e)e.match(/^\d+$/)?e="Num"+e:e.charAt(0).match(/\d/)&&(e={0:"Zero_",1:"One_",2:"Two_",3:"Three_",4:"Four_",5:"Five_",6:"Six_",7:"Seven_",8:"Eight_",9:"Nine_"}[e.charAt(0)]+e.substr(1));else return"";return e}function A(e){if(e===null)return"any";switch(typeof e){case"string":return/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(\+\d\d:\d\d|Z)/.test(e)?"time.Time":"string";case"number":return e%1===0?e>-2147483648&&e<2147483647?"int":"int64":"float64";case"boolean":return"bool";case"object":return Array.isArray(e)?"slice":"struct";default:return"any"}}function z(e,t){return e.substr(0,5)=="float"&&t.substr(0,3)=="int"?e:e.substr(0,3)=="int"&&t.substr(0,5)=="float"?t:"any"}function Z(e){e.match(/^[_A-Z0-9]+$/)&&(e=e.toLowerCase());let t=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return e.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(n,r,s){return t.indexOf(s.toUpperCase())>=0?r+s.toUpperCase():r+s[0].toUpperCase()+s.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(n,r,s){return t.indexOf(r+s.toUpperCase())>=0?(r+s).toUpperCase():r+s})}function J(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}function w(e){let t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(e.length>=36){let r=e.substr(-36);if(t.test(r))return e.slice(0,-1*(36+1))}return e}function X(e,t){let n="[object Object]";return Object.prototype.toString.call(e)===n&&Object.prototype.toString.call(t)===n}function F(e,t){let n=e.length,r=t.length;if(n==0&&r==0)return!0;if(n!=r)return!1;for(let s of e)if(!t.includes(s))return!1;return!0}function V(e){for(let t in e)e[t]=O(e[t]);return e}}typeof E<"u"&&(E.parent||E.children?process.argv.length>2&&process.argv[2]==="-big"?(bufs=[],process.stdin.on("data",function(a){bufs.push(a)}),process.stdin.on("end",function(){let a=Buffer.concat(bufs).toString("utf8");console.log(P(a).go)})):process.stdin.on("data",function(a){let c=a.toString("utf8");console.log(P(c).go)}):E.exports=P)});var K=G();(function(){var a=document.getElementById("inputContainer"),c=document.getElementById("outputContainer"),o=document.getElementById("inputJson"),I=isOmitEmpty=!1,S=!0,T="";document.getElementById("inlineType").addEventListener("change",function(){I=this.checked,y(o.value)}),document.getElementById("omitEmpty").addEventListener("change",function(){isOmitEmpty=this.checked,y(o.value)}),document.getElementById("autoConvert").addEventListener("change",function(){S=this.checked,S&&y(o.value)}),c.addEventListener("dblclick",function(){c.classList.add("hidden"),a.classList.remove("hidden")}),a.addEventListener("dblclick",function(){y(o.value)});let y=function(v){if(!v){o.classList.remove("!border-red-500");return}var k=document.getElementById("outputStruct"),L=K(v,"",!I,!1,isOmitEmpty);if(L.error)o.classList.add("!border-red-500");else{T=L.go;let x=Prism.highlight(L.go,Prism.languages.go,"go");k.innerHTML='<pre class="language-go !px-3 !py-2 !m-0 h-full"><code class="prism language-go" >'+x+"</code></pre>",a.classList.add("hidden"),c.classList.remove("hidden"),o.classList.remove("!border-red-500")}};o.addEventListener("keyup",function(){S&&y(this.value)}),document.getElementById("convert").addEventListener("click",function(){y(o.value)}),document.getElementById("copy").addEventListener("click",function(){navigator.clipboard.writeText(T).then(()=>{defaultToast("\u5DF2\u590D\u5236")})})})();})();
